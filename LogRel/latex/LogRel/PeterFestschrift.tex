\begin{code}[hide]%
\>[0]\AgdaSymbol{\{-\#}\AgdaSpace{}%
\AgdaKeyword{OPTIONS}\AgdaSpace{}%
\AgdaPragma{--rewriting}\AgdaSpace{}%
\AgdaSymbol{\#-\}}\<%
\\
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{LogRel.PeterFestschrift}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Empty}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{‚ä•}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{‚ä•-elim}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.List}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{List}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{}‚à∑\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{map}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{length}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Nat}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Nat.Properties}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Bool}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{true}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{false}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Bool}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaDatatype{ùîπ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Product}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{},\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}√ó\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{proj‚ÇÅ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaField{proj‚ÇÇ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Œ£-syntax}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{‚àÉ-syntax}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Sum}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚äé\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Unit}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaRecord{‚ä§}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{tt}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Data.Unit.Polymorphic}\AgdaSpace{}%
\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ä§}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaFunction{top·µñ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{tt}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaFunction{tt·µñ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Relation.Binary.PropositionalEquality}\AgdaSpace{}%
\AgdaSymbol{as}\AgdaSpace{}%
\AgdaModule{Eq}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚â°\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚â¢\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{sym}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{cong}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subst}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{trans}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Relation.Nullary}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{¬¨\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaRecord{Dec}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Var}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Sig}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{LogRel.PeterCastCalculus}\<%
\\
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{StepIndexedLogic}\<%
\end{code}

\section{Precision on Types and Terms}
\label{sec:precision}

To talk about the gradual guarantee, we first define when one type is
less precise than another one. The following definition says that the
unknown type ‚òÖ is less precise than any other type.

\begin{code}%
\>[0]\AgdaKeyword{infixr}\AgdaSpace{}%
\AgdaNumber{6}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚äë\AgdaUnderscore{}}}\<%
\\
\>[0]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚äë\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaInductiveConstructor{unk‚äëunk}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\<%
\\
%
\>[2]\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{G}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{B}\<%
\\
%
\>[2]\AgdaInductiveConstructor{base‚äë}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}\AgdaSpace{}%
\AgdaBound{Œπ}\<%
\\
%
\>[2]\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaBound{C}\AgdaSpace{}%
\AgdaBound{D}\AgdaSymbol{\}}%
\>[21]\AgdaSymbol{‚Üí}%
\>[24]\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{C}%
\>[31]\AgdaSymbol{‚Üí}%
\>[34]\AgdaBound{B}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{D}%
\>[41]\AgdaSymbol{‚Üí}%
\>[44]\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚áí}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{C}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚áí}}\AgdaSpace{}%
\AgdaBound{D}\<%
\end{code}

The first two rules for precision are usually presented as a single
rule that says ‚òÖ is less precise than any type.  Instead we have
separated out the case for when both types are ‚òÖ from the case when
only the less-precise type is ‚òÖ.  Also, for the rule \textsf{unk‚äë},
instead of writing $B ‚â¢ ‚òÖ$ we have written $‚åà G ‚åâ ‚äë B$, which turns
out to be important later when we define the logical relation and use
recursion on the precision relation.
%
The \textsf{Prec} type bundles two types in the precision relation and
of course, precision is reflexive.

\begin{code}%
\>[0]\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\<%
\\
\>[0]\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚àÉ[}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaFunction{‚àÉ[}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{Refl‚äë}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{Refl‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\<%
\\
\>[0]\AgdaFunction{Refl‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\<%
\\
\>[0]\AgdaFunction{Refl‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚áí}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaFunction{Refl‚äë}\AgdaSpace{}%
\AgdaFunction{Refl‚äë}\<%
\end{code}

\begin{code}[hide]%
\>[0]\AgdaFunction{unk‚äëgnd-inv}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{G}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSymbol{)}\<%
\\
%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{‚àÉ[}\AgdaSpace{}%
\AgdaBound{d}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{G}\AgdaSymbol{\}\{}\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
\>[0]\AgdaFunction{unk‚äëgnd-inv}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{Œπ}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{unk‚äëgnd-inv}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{d}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{d}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{())}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{())}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{())}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{())}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{Œπ}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{Œπ}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚áí}}\AgdaSpace{}%
\AgdaBound{A‚ÇÅ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{c‚ÇÅ}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{d}\AgdaSpace{}%
\AgdaBound{d‚ÇÅ}\AgdaSymbol{))}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{d}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaBound{c‚ÇÅ}\AgdaSpace{}%
\AgdaBound{d‚ÇÅ}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{gnd-prec-unique}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{G}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\<%
\\
%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{d}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\<%
\\
%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
\>[0]\AgdaFunction{gnd-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaOperator{\AgdaInductiveConstructor{\$·µç}}\AgdaSpace{}%
\AgdaBound{Œπ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaDottedPattern{\AgdaSymbol{.(}}\AgdaDottedPattern{\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaBound{Œπ}}\AgdaDottedPattern{\AgdaSymbol{)}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[0]\AgdaFunction{gnd-prec-unique}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚òÖ‚áí‚òÖ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaDottedPattern{\AgdaSymbol{.(\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaOperator{\AgdaInductiveConstructor{‚áí}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{\AgdaUnderscore{})}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{c‚ÇÅ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{d}\AgdaSpace{}%
\AgdaBound{d‚ÇÅ}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{d}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaFunction{dyn-prec-unique}\AgdaSpace{}%
\AgdaBound{c‚ÇÅ}\AgdaSpace{}%
\AgdaBound{d‚ÇÅ}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\end{code}

Figure~\ref{fig:term-precision} defines the precision relation on
terms.  The judgement has the form $Œì ‚ä© M ‚äë M‚Ä≤ ‚¶Ç c$ where Œì is a list
of precision-related types and $c : A ‚äë A‚Ä≤$ is a precision derivation
for the types of $M$ and $M‚Ä≤$. There are two rules for injection and
also for projection, allowing either to appear on the left or right
across from an arbitrary term. However, when injection is on the
right, the term on the left must have type ‚òÖ (rule
\textsf{‚äë-inj-R}).  Similarly, when projection is on the right, the
term on the left must have type ‚òÖ (rule \textsf{‚äë-proj-R}).

\begin{figure}[tbp]
\begin{code}%
\>[0]\AgdaKeyword{infix}\AgdaSpace{}%
\AgdaNumber{3}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚ä©\AgdaUnderscore{}‚äë\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\<%
\\
\>[0]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚ä©\AgdaUnderscore{}‚äë\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{List}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Type}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Set}%
\>[70]\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaInductiveConstructor{‚äë-var}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{A‚äëB}\AgdaSymbol{\}}%
\>[23]\AgdaSymbol{‚Üí}%
\>[26]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àã}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëB}%
\>[39]\AgdaSymbol{‚Üí}%
\>[42]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaBound{A‚äëB}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-lit}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}%
\>[21]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSymbol{\{}\AgdaFunction{typeof}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{\}}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-app}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{L}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{L‚Ä≤}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaBound{C}\AgdaSpace{}%
\AgdaBound{D}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{C}\AgdaSymbol{\}\{}\AgdaBound{d}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{D}\AgdaSymbol{\}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{L}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{L‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{d}%
\>[30]\AgdaSymbol{‚Üí}%
\>[33]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\<%
\\
%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{L}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{¬∑}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{L‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{¬∑}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-lam}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaBound{C}\AgdaSpace{}%
\AgdaBound{D}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{C}\AgdaSymbol{\}\{}\AgdaBound{d}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{D}\AgdaSymbol{\}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{C}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{d}%
\>[37]\AgdaSymbol{‚Üí}%
\>[40]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaInductiveConstructor{∆õ}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaInductiveConstructor{∆õ}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{d}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-inj-L}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{G}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{\}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}%
\>[23]\AgdaSymbol{‚Üí}%
\>[26]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{G}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{c}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-inj-R}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{G}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSymbol{\}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}%
\>[23]\AgdaSymbol{‚Üí}%
\>[26]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-proj-L}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{\}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äë}\AgdaSpace{}%
\AgdaBound{c}%
\>[28]\AgdaSymbol{‚Üí}%
\>[31]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{?‚ü©}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-proj-R}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaBound{H}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaInductiveConstructor{‚òÖ}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSymbol{\}}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[5]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}%
\>[29]\AgdaSymbol{‚Üí}%
\>[32]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{?‚ü©}}%
\>[51]\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚äë-blame}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}%
\>[22]\AgdaSymbol{‚Üí}%
\>[25]\AgdaFunction{map}\AgdaSpace{}%
\AgdaField{proj‚ÇÅ}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä¢}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A}%
\>[46]\AgdaSymbol{‚Üí}%
\>[49]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ä©}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaInductiveConstructor{blame}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚¶Ç}}\AgdaSpace{}%
\AgdaFunction{Refl‚äë}\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}}\<%
\end{code}
\caption{Precision Relation on Terms}
\label{fig:term-precision}
\end{figure}

With precision defined, we are ready to discuss the gradual guarantee.
It states that if $M$ is less precise than $M‚Ä≤$, then $M$ and $M‚Ä≤$
behave in a similar way, as defined below by the predicate
$\mathsf{gradual}\,M\,M‚Ä≤$. In particular, it says that the
less-precise term behaves exactly like the more-precise term. On the
other hand the more-precise term may reduce to \textsf{blame} even
though the less-precise term does not.

\begin{code}%
\>[0]\AgdaFunction{gradual}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Set}\<%
\\
\>[0]\AgdaFunction{gradual}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áì}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áì}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áë}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áë}}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áì}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áì}}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äé}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaInductiveConstructor{blame}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áë}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áë‚äéblame}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaInductiveConstructor{blame}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaInductiveConstructor{blame}\AgdaSymbol{)}\<%
\end{code}

\section{Step-Indexed Logic}
\label{sec:SIL}

The Step-Indexed Logic (SIL) library~\cite{Siek:2023aa} is a shallow
embedding of a modal logic into Agda. The formulas of this logic have
type \textsf{Set·µí}, which is a record with three fields, the most
important of which is named \textsf{\#} and is a function from ‚Ñï to
\textsf{Set} which expresses the meaning of the formula in Agda.
Think of the ‚Ñï as a count-down clock, with smaller numbers
representing later points in time. The other two fields of the record
contain proofs of the LSLR invariants: (1) that the formula is true at
0, and (2) if the formula is true at some number, then it is true at
all smaller numbers (monotonicity). Each of the constructors for SIL
formulas proves these two properties, thereby saving the client of SIL
from some tedious proofs.

SIL includes the connectives of first-order logic (conjunction,
disjunction, existential and universal quantification, etc.).

What makes SIL special is that it includes an operator Œº·µí for defining
recursive predicates. In the body of the Œº·µí, de Bruijn index 0 refers
to itself, that is, the entire Œº·µí. However, variable 0 may only be
used ``later'', that is, underneath at least one use of the modal
operator ‚ñ∑·µí.  The formula in the body of a Œº·µí has type
$\mathsf{Set}À¢\,Œì\,Œî$, where $Œì$ gives the type for each recursive
predicate in scope and $Œî$ records when each recursive predicate is
used (now or later). \textsf{SetÀ¢} is a record whose field \textsf{\#}
is a function from a list of step-indexed predicates to \textsf{Set·µí}.
The majority of the lines of code in the SIL library are dedicated to
proving the \textsf{fixpoint·µí} theorem, which states that a recursive
predicate is equivalent to one unrolling of itself. The proof of
\textsf{fixpoint·µí}is an adaptation of the fixpoint theorem of Appel
and McAllester~\cite{Appel:2001aa}.

\begin{code}%
\>[0]\AgdaFunction{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{:}%
\>[644I]\AgdaSymbol{‚àÄ(}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{P}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{SetÀ¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{cons}\AgdaSpace{}%
\AgdaInductiveConstructor{Later}\AgdaSpace{}%
\AgdaInductiveConstructor{‚àÖ}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{a}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\<%
\\
\>[.][@{}l@{}]\<[644I]%
\>[4]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{Œº·µí}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{a}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µí}}\AgdaSpace{}%
\AgdaField{\#}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{a}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Œº·µí}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaFunction{tt·µñ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{a}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{fixpoint·µí}\AgdaSpace{}%
\AgdaBound{P}\AgdaSpace{}%
\AgdaBound{a}\<%
\end{code}


\section{A Logical Relation for Precision}
\label{sec:log-rel}

\begin{code}[hide]%
\>[0]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\<%
\\
%
\>[2]\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\<%
\end{code}

To define a logical relation for precision, we adapt the logical
relation of New~\cite{New:2020ab}, which used explicit step indexing,
into the Step-Indexed Logic. So the logical relation has two
directions (of type \textsf{Dir}): the ‚âº direction has the
less-precise term taking the lead whereas the ‚âΩ direction has the
more-precise term in the lead.
%
In addition, the logical relation consists of mutually-recursive
relations on both terms and values. SIL does not directly support
mutual recursion, but it can be expressed by combining the two
relations into a single relation whose input is a disjoint sum.  The
formula for expressing membership in these recursive relations is
verbose, so we define the below shorthands.

\begin{code}%
\>[0]\AgdaFunction{LR-type}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPrimitive{Set}\<%
\\
\>[0]\AgdaFunction{LR-type}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äé}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Context}\<%
\\
\>[0]\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR-type}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à£\AgdaUnderscore{}À¢‚äë·¥∏·¥ø‚Çú\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{SetÀ¢}\AgdaSpace{}%
\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{cons}\AgdaSpace{}%
\AgdaInductiveConstructor{Now}\AgdaSpace{}%
\AgdaInductiveConstructor{‚àÖ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{((\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àà}}\AgdaSpace{}%
\AgdaInductiveConstructor{zeroÀ¢}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à£\AgdaUnderscore{}À¢‚äë·¥∏·¥ø·µ•\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{SetÀ¢}\AgdaSpace{}%
\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{cons}\AgdaSpace{}%
\AgdaInductiveConstructor{Now}\AgdaSpace{}%
\AgdaInductiveConstructor{‚àÖ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{((\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àà}}\AgdaSpace{}%
\AgdaInductiveConstructor{zeroÀ¢}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaKeyword{instance}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{TermInhabited}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{Inhabited}\AgdaSpace{}%
\AgdaDatatype{Term}\<%
\\
%
\>[2]\AgdaFunction{TermInhabited}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaKeyword{record}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaSpace{}%
\AgdaField{elt}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{`}}\AgdaSpace{}%
\AgdaNumber{0}\AgdaSpace{}%
\AgdaSymbol{\}}\<%
\end{code}

\begin{figure}[tbp]
\begin{code}%
\>[0]\AgdaFunction{LR‚Çú}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{SetÀ¢}\AgdaSpace{}%
\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{cons}\AgdaSpace{}%
\AgdaInductiveConstructor{Later}\AgdaSpace{}%
\AgdaInductiveConstructor{‚àÖ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{LR·µ•}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{SetÀ¢}\AgdaSpace{}%
\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{cons}\AgdaSpace{}%
\AgdaInductiveConstructor{Later}\AgdaSpace{}%
\AgdaInductiveConstructor{‚àÖ}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{LR‚Çú}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{(}\AgdaFunction{‚àÉÀ¢[}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ü∂}}\AgdaSpace{}%
\AgdaBound{N}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ñ∑À¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{))}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äéÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaInductiveConstructor{blame}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äéÀ¢}}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚àÉÀ¢[}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR·µ•}\AgdaSpace{}%
\AgdaSymbol{(\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)))}\<%
\\
\>[0]\AgdaFunction{LR‚Çú}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{(}\AgdaFunction{‚àÉÀ¢[}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ü∂}}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ñ∑À¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{))}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äéÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Blame}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äéÀ¢}}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚àÉÀ¢[}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR·µ•}\AgdaSpace{}%
\AgdaSymbol{(\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{LR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDottedPattern{\AgdaSymbol{.(}}\AgdaDottedPattern{\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaBound{Œπ}}\AgdaDottedPattern{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.(}}\AgdaDottedPattern{\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaBound{Œπ}}\AgdaDottedPattern{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{base‚äë}\AgdaSymbol{\{}\AgdaBound{Œπ}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$}\AgdaSpace{}%
\AgdaBound{c‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{c‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaCatchallClause{\AgdaFunction{LR·µ•}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaSymbol{(}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.(}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{Œπ}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{)}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.(}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{\$‚Çú}}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{Œπ}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{)}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaInductiveConstructor{base‚äë}}\AgdaCatchallClause{\AgdaSymbol{\{}}\AgdaCatchallClause{\AgdaBound{Œπ}}\AgdaCatchallClause{\AgdaSymbol{\})}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{dir}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V‚Ä≤}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaFunction{LR·µ•}%
\>[957I]\AgdaSymbol{(}\AgdaDottedPattern{\AgdaSymbol{.(}}\AgdaDottedPattern{\AgdaBound{A}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaOperator{\AgdaInductiveConstructor{‚áí}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaBound{B}}\AgdaDottedPattern{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.(}}\AgdaDottedPattern{\AgdaBound{A‚Ä≤}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaOperator{\AgdaInductiveConstructor{‚áí}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaBound{B‚Ä≤}}\AgdaDottedPattern{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{fun‚äë}\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{B‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{B‚äëB‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{∆õ}\AgdaSpace{}%
\AgdaBound{N}\AgdaSymbol{)(}\AgdaInductiveConstructor{∆õ}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[.][@{}l@{}]\<[957I]%
\>[4]\AgdaFunction{‚àÄÀ¢[}\AgdaSpace{}%
\AgdaBound{W}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaFunction{‚àÄÀ¢[}%
\>[976I]\AgdaBound{W‚Ä≤}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaFunction{‚ñ∑À¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{W}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{W‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\<%
\\
\>[976I][@{}l@{\AgdaIndent{0}}]%
\>[18]\AgdaOperator{\AgdaFunction{‚ÜíÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ñ∑À¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{N}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaBound{W}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{[}}\AgdaSpace{}%
\AgdaBound{W‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{]}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{B‚äëB‚Ä≤}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaCatchallClause{\AgdaFunction{LR·µ•}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaSymbol{(}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.(}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{A}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{‚áí}}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{B}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{)}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.(}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{A‚Ä≤}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{‚áí}}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{B‚Ä≤}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{)}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaInductiveConstructor{fun‚äë}}\AgdaCatchallClause{\AgdaSymbol{\{}}\AgdaCatchallClause{\AgdaBound{A}}\AgdaCatchallClause{\AgdaSymbol{\}\{}}\AgdaCatchallClause{\AgdaBound{B}}\AgdaCatchallClause{\AgdaSymbol{\}\{}}\AgdaCatchallClause{\AgdaBound{A‚Ä≤}}\AgdaCatchallClause{\AgdaSymbol{\}\{}}\AgdaCatchallClause{\AgdaBound{B‚Ä≤}}\AgdaCatchallClause{\AgdaSymbol{\}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{A‚äëA‚Ä≤}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{B‚äëB‚Ä≤}}\AgdaCatchallClause{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{dir}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V‚Ä≤}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaFunction{LR·µ•}%
\>[1017I]\AgdaSymbol{(}\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaInductiveConstructor{‚òÖ}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaInductiveConstructor{‚òÖ}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\<%
\\
\>[.][@{}l@{}]\<[1017I]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µç}}\AgdaSpace{}%
\AgdaBound{H}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ñ∑À¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaFunction{Refl‚äë}\AgdaSymbol{\{}\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSymbol{\}))}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{neq}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaCatchallClause{\AgdaFunction{LR·µ•}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaSymbol{(}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaInductiveConstructor{‚òÖ}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaInductiveConstructor{‚òÖ}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaInductiveConstructor{unk‚äëunk}}\AgdaCatchallClause{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{dir}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V‚Ä≤}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaFunction{LR·µ•}%
\>[1071I]\AgdaSymbol{(}\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaInductiveConstructor{‚òÖ}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{A‚Ä≤}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{H}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\<%
\\
\>[.][@{}l@{}]\<[1071I]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µç}}\AgdaSpace{}%
\AgdaBound{H}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaFunction{‚ñ∑À¢}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{neq}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaFunction{LR·µ•}%
\>[1110I]\AgdaSymbol{(}\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaInductiveConstructor{‚òÖ}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaSymbol{.}}\AgdaDottedPattern{\AgdaBound{A‚Ä≤}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{H}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\<%
\\
\>[.][@{}l@{}]\<[1110I]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µç}}\AgdaSpace{}%
\AgdaBound{H}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{À¢}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√óÀ¢}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{‚åà}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚åâ}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{neq}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\\
\>[0]\AgdaCatchallClause{\AgdaFunction{LR·µ•}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaSymbol{(}}\AgdaCatchallClause{\AgdaInductiveConstructor{‚òÖ}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaDottedPattern{\AgdaCatchallClause{\AgdaSymbol{.}}}\AgdaDottedPattern{\AgdaCatchallClause{\AgdaBound{A‚Ä≤}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaOperator{\AgdaInductiveConstructor{,}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaInductiveConstructor{unk‚äë}}\AgdaCatchallClause{\AgdaSymbol{\{}}\AgdaCatchallClause{\AgdaBound{H}}\AgdaCatchallClause{\AgdaSymbol{\}\{}}\AgdaCatchallClause{\AgdaBound{A‚Ä≤}}\AgdaCatchallClause{\AgdaSymbol{\}}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{d}}\AgdaCatchallClause{\AgdaSymbol{)}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{dir}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V}}\AgdaSpace{}%
\AgdaCatchallClause{\AgdaBound{V‚Ä≤}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaDatatype{‚ä•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{À¢}}\<%
\end{code}

\caption{Logical Relation for Precision on Terms $\mathsf{LR}_t$
  and Values $\mathsf{LR}_v$}
\label{fig:log-rel-precision}
\end{figure}

The logical relation is defined in Figure~\ref{fig:log-rel-precision}
and explained in the following paragraphs.  The definition of the
logical relation for terms is based on the requirements of the gradual
guarantee, but it only talks about one step at a time of the leading
term. In the ‚âº direction, the first clause says that the less-precise
$M$ takes a step to $N$ and that $N$ is related to $M‚Ä≤$ at one tick
later in time. The second clause allows the more-precise $M‚Ä≤$ to
reduce to an error. The third clause says that the less-precise $M$ is
already a value, and requires $M‚Ä≤$ to reduce to a value that is
related to $M$. The other direction ‚âΩ is defined in a similar way,
but with the more precise term $M‚Ä≤$ taking one step at a time.

The following definitions combine the LR·µ• and LR‚Çú functions into a
single function, pre-LR‚Çú‚äéLR·µ•, and than applies the Œº·µí operator to
produce the recursive relation LR‚Çú‚äéLR·µ•. Finally, we define some
shorthand for the logical relation on values, written ‚äë·¥∏·¥ø·µ•, and the
logical relation on terms, ‚äë·¥∏·¥ø‚Çú.

\begin{code}%
\>[0]\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{LR-type}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{SetÀ¢}\AgdaSpace{}%
\AgdaFunction{LR-ctx}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{cons}\AgdaSpace{}%
\AgdaInductiveConstructor{Later}\AgdaSpace{}%
\AgdaInductiveConstructor{‚àÖ}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR·µ•}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\<%
\\
\>[0]\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{c}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR‚Çú}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{LR-type}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{Set·µí}\<%
\\
\>[0]\AgdaFunction{LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Œº·µí}\AgdaSpace{}%
\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaBound{X}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à£\AgdaUnderscore{}‚äë·¥∏·¥ø·µ•\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{Set·µí}\<%
\\
\>[0]\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{((\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à£\AgdaUnderscore{}‚äë·¥∏·¥ø‚Çú\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{Set·µí}\<%
\\
\>[0]\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{((\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{))}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚äë·¥∏·¥ø‚Çú\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{Set·µí}\<%
\\
\>[0]\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\<%
\end{code}

The relations that we have defined so far, ‚äë·¥∏·¥ø·µ• and ‚äë·¥∏·¥ø‚Çú, only apply
to closed terms, that is, terms with no free variables.  We also need
to relate open terms. The standard way to do that is to apply two
substitutions to the two terms, replacing each free variable with
related values. We relate a pair of substitutions Œ≥ and Œ≥‚Ä≤ with the
following definition, which says that the substitutions must be
pointwise related using the logical relation for values.

\begin{code}%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à£\AgdaUnderscore{}‚ä®\AgdaUnderscore{}‚äë·¥∏·¥ø\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{List}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{Subst}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{Subst}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{List}\AgdaSpace{}%
\AgdaRecord{Set·µí}\<%
\\
\>[0]\AgdaInductiveConstructor{[]}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{Œ≥‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{[]}\<%
\\
\>[0]\AgdaSymbol{((\AgdaUnderscore{}}%
\>[1334I]\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{Œ≥‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[.][@{}l@{}]\<[1334I]%
\>[4]\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaNumber{0}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œ≥‚Ä≤}\AgdaSpace{}%
\AgdaNumber{0}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚à∑}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œ≥‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)))}\<%
\end{code}

We then define two open terms $M$ and $M‚Ä≤$ to be logically related
if there are a pair of related subtitutions $Œ≥$ and $Œ≥‚Ä≤$ such that
applying them to $M$ and $M‚Ä≤$ produces related terms.

\begin{code}%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚à£\AgdaUnderscore{}‚ä®\AgdaUnderscore{}‚äë·¥∏·¥ø\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{List}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Set}\<%
\\
\>[0]\AgdaBound{Œì}%
\>[1386I]\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaSymbol{(\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaBound{Œ≥‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Subst}\AgdaSymbol{)}\<%
\\
\>[1386I][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{Œ≥‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä¢·µí}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{‚ü™}}\AgdaSpace{}%
\AgdaBound{Œ≥}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü´}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{‚ü™}}\AgdaSpace{}%
\AgdaBound{Œ≥‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü´}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\<%
\end{code}

We use the following notation for the conjunction of the two
directions and define the \textsf{proj} function for accessing each
direction.

\begin{code}%
\>[0]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚ä®\AgdaUnderscore{}‚äë·¥∏·¥ø\AgdaUnderscore{}‚¶Ç\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{List}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{Prec}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Set}\<%
\\
\>[0]\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
\>[0]\AgdaFunction{proj}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{Œì}\AgdaSymbol{\}\{}\AgdaBound{c}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Œì}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä®}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{c}\<%
\\
\>[0]\AgdaFunction{proj}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaBound{M‚äëM‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaField{proj‚ÇÅ}\AgdaSpace{}%
\AgdaBound{M‚äëM‚Ä≤}\<%
\\
\>[0]\AgdaFunction{proj}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaBound{M‚äëM‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaField{proj‚ÇÇ}\AgdaSpace{}%
\AgdaBound{M‚äëM‚Ä≤}\<%
\end{code}

\begin{code}[hide]%
\>[0]\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaDatatype{Term}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{Set·µí}\<%
\\
\>[0]\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{(}\AgdaFunction{‚àÉ·µí[}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ü∂}}\AgdaSpace{}%
\AgdaBound{N}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ñ∑·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{N}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{))}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äé·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaInductiveConstructor{blame}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äé·µí}}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚àÉ·µí[}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)))}\<%
\\
\>[0]\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{(}\AgdaFunction{‚àÉ·µí[}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚ü∂}}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ñ∑·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{))}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äé·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Blame}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\<%
\\
%
\>[3]\AgdaOperator{\AgdaFunction{‚äé·µí}}\AgdaSpace{}%
\AgdaSymbol{((}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚àÉ·µí[}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚Ü†}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)))}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{LR‚Çú-stmt}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{M}\AgdaSymbol{\}\{}\AgdaBound{M‚Ä≤}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µí}}\AgdaSpace{}%
\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{LR‚Çú-stmt}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{M}\AgdaSymbol{\}\{}\AgdaBound{M‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}%
\>[43]\AgdaOperator{\AgdaFunction{‚©¶‚ü®}}\AgdaSpace{}%
\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
%
\>[2]\AgdaFunction{Œº·µí}\AgdaSpace{}%
\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{X‚ÇÇ}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSymbol{)}%
\>[43]\AgdaOperator{\AgdaFunction{‚©¶‚ü®}}\AgdaSpace{}%
\AgdaFunction{fixpoint·µí}\AgdaSpace{}%
\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{X‚ÇÇ}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
%
\>[2]\AgdaField{\#}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{X‚ÇÇ}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaFunction{tt·µñ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚©¶‚ü®}}\AgdaSpace{}%
\AgdaFunction{EQ}\AgdaSymbol{\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ü©}}\<%
\\
%
\>[2]\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}%
\>[43]\AgdaOperator{\AgdaFunction{‚àé}}\<%
\\
%
\>[2]\AgdaKeyword{where}\<%
\\
%
\>[2]\AgdaFunction{c}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{X‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaDatatype{Dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{LR-type}\<%
\\
%
\>[2]\AgdaFunction{X‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{c}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{X‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{c}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\<%
\\
%
\>[2]\AgdaFunction{EQ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaField{\#}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{X‚ÇÇ}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSymbol{))}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaFunction{tt·µñ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µí}}\AgdaSpace{}%
\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\<%
\\
%
\>[2]\AgdaFunction{EQ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚âº}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[1708I]\AgdaFunction{cong-‚äé·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{cong-‚äé·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{cong-√ó·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
\>[1708I][@{}l@{\AgdaIndent{0}}]%
\>[13]\AgdaSymbol{(}\AgdaFunction{cong-‚àÉ}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{cong-√ó·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{cong-√ó·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
\>[13][@{}l@{\AgdaIndent{0}}]%
\>[14]\AgdaSymbol{((}\AgdaFunction{‚â°·µí-sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{fixpoint·µí}\AgdaSpace{}%
\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{c}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{)))))))))}\<%
\\
%
\>[2]\AgdaFunction{EQ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚âΩ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}%
\>[1738I]\AgdaFunction{cong-‚äé·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{cong-‚äé·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
\>[1738I][@{}l@{\AgdaIndent{0}}]%
\>[12]\AgdaSymbol{(}\AgdaFunction{cong-√ó·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{cong-‚àÉ}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{cong-√ó·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
\>[12][@{}l@{\AgdaIndent{0}}]%
\>[14]\AgdaSymbol{(}\AgdaFunction{cong-√ó·µí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚â°·µí-refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSymbol{)}\<%
\\
\>[14][@{}l@{\AgdaIndent{0}}]%
\>[15]\AgdaSymbol{(}\AgdaFunction{‚â°·µí-sym}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{fixpoint·µí}\AgdaSpace{}%
\AgdaFunction{pre-LR‚Çú‚äéLR·µ•}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{c}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{))))))))}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{LR‚Çú-suc}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{M}\AgdaSymbol{\}\{}\AgdaBound{M‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{k}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaField{\#}\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚áî}}\AgdaSpace{}%
\AgdaField{\#}\AgdaSymbol{(}\AgdaFunction{LR‚Çú-def}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{)}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{LR‚Çú-suc}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{M}\AgdaSymbol{\}\{}\AgdaBound{M‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{k}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaFunction{‚â°·µí‚áí‚áî}\AgdaSymbol{\{}\AgdaArgument{k}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR‚Çú-stmt}\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{M}\AgdaSymbol{\}\{}\AgdaBound{M‚Ä≤}\AgdaSymbol{\})}\<%
\end{code}

The definition of ‚äë·¥∏·¥ø·µ• included several clauses that ensured that the
related values are indeed syntactic values. Here we make use of that
to prove that indeed, logically related values are syntactic values.

\begin{code}[hide]%
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaField{\#}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{)}%
\>[41]\AgdaSymbol{‚Üí}%
\>[44]\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó}}\AgdaSpace{}%
\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaInductiveConstructor{unk‚äëunk}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{H}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ùí±MM‚Ä≤}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µç}}\AgdaSpace{}%
\AgdaBound{H}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{neq}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚ä•-elim}\AgdaSpace{}%
\AgdaBound{ùí±MM‚Ä≤}\<%
\\
\>[0]\AgdaSymbol{...}%
\>[1838I]\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[.][@{}l@{}]\<[1838I]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{ùí±MM‚Ä≤}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å©}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å™}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å©}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å™}}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaInductiveConstructor{‚âº}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{H}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaBound{ùí±VGV‚Ä≤}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µç}}\AgdaSpace{}%
\AgdaBound{H}\<%
\\
\>[0]\AgdaSymbol{...}%
\>[1870I]\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[.][@{}l@{}]\<[1870I]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{ùí±VGV‚Ä≤}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å©}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å™}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaInductiveConstructor{‚âΩ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{H}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaBound{ùí±VGV‚Ä≤}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚â°·µç}}\AgdaSpace{}%
\AgdaBound{H}\<%
\\
\>[0]\AgdaSymbol{...}%
\>[1899I]\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{yes}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
\>[.][@{}l@{}]\<[1899I]%
\>[4]\AgdaKeyword{with}\AgdaSpace{}%
\AgdaBound{ùí±VGV‚Ä≤}\<%
\\
\>[0]\AgdaSymbol{...}\AgdaSpace{}%
\AgdaSymbol{|}\AgdaSpace{}%
\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å©}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚å™}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{unk‚äë}\AgdaSymbol{\{}\AgdaBound{H}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{d}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{‚ü®}}\AgdaSpace{}%
\AgdaBound{G}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{!‚ü©}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaBound{ùí±VGV‚Ä≤}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaSymbol{|}\AgdaSpace{}%
\AgdaInductiveConstructor{no}\AgdaSpace{}%
\AgdaBound{neq}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚ä•-elim}\AgdaSpace{}%
\AgdaBound{ùí±VGV‚Ä≤}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{base‚äë}\AgdaSymbol{\{}\AgdaBound{Œπ}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$}\AgdaSpace{}%
\AgdaBound{c‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$Ã¨}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{\$Ã¨}\AgdaSpace{}%
\AgdaBound{c}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{k}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{fun‚äë}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{B‚äëB‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{∆õ}\AgdaSpace{}%
\AgdaBound{N}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{∆õ}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{∆õÃ¨}}\AgdaSpace{}%
\AgdaBound{N}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{∆õÃ¨}}\AgdaSpace{}%
\AgdaBound{N‚Ä≤}\AgdaSymbol{)}\<%
\end{code}

\begin{code}%
\>[0]\AgdaFunction{LR·µ•‚áíValue·µí}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{ùí´}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùí´}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä¢·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùí´}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä¢·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{√ó·µí}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaDatatype{Value}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSymbol{)}\AgdaOperator{\AgdaFunction{·µí}}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{LR·µ•‚áíValue·µí}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaBound{M‚äëM‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[4]\AgdaFunction{‚ä¢·µí-intro}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaSymbol{\{}%
\>[1991I]\AgdaInductiveConstructor{zero}\AgdaSpace{}%
\AgdaBound{ùí´k}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaInductiveConstructor{tt}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaInductiveConstructor{tt}\AgdaSpace{}%
\AgdaSymbol{;}\<%
\\
\>[.][@{}l@{}]\<[1991I]%
\>[17]\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ùí´k}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{M}\AgdaSpace{}%
\AgdaBound{M‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ä¢·µí-elim}\AgdaSpace{}%
\AgdaBound{M‚äëM‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{ùí´k}\AgdaSymbol{)\}}\<%
\end{code}

If two values are related via ‚äë·¥∏·¥ø·µ•, then they are also related via
‚äë·¥∏·¥ø‚Çú.

\begin{code}[hide]%
\>[0]\AgdaFunction{LR·µ•‚áíLR‚Çú-step}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{k}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaField{\#}\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{k}%
\>[34]\AgdaSymbol{‚Üí}%
\>[37]\AgdaField{\#}\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{k}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíLR‚Çú-step}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{V}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{V‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{zero}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤k}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaField{tz}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{)}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíLR‚Çú-step}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{V}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{V‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚âº}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤sk}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{‚áî-fro}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR‚Çú-suc}\AgdaSymbol{\{}\AgdaArgument{dir}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âº}\AgdaSymbol{\})}\<%
\\
%
\>[2]\AgdaSymbol{(}\AgdaKeyword{let}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤sk}\AgdaSpace{}%
\AgdaKeyword{in}\<%
\\
%
\>[2]\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{END}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤sk}\AgdaSymbol{)))))}\<%
\\
\>[0]\AgdaFunction{LR·µ•‚áíLR‚Çú-step}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{V}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{V‚Ä≤}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{‚âΩ}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaInductiveConstructor{suc}\AgdaSpace{}%
\AgdaBound{k}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤sk}\AgdaSpace{}%
\AgdaSymbol{=}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{‚áî-fro}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{LR‚Çú-suc}\AgdaSymbol{\{}\AgdaArgument{dir}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{‚âΩ}\AgdaSymbol{\})}\<%
\\
%
\>[2]\AgdaSymbol{(}\AgdaKeyword{let}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v‚Ä≤}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{LR·µ•‚áíValue}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤sk}\AgdaSpace{}%
\AgdaKeyword{in}\<%
\\
%
\>[2]\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{inj‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{v‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{END}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{v}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{ùí±VV‚Ä≤sk}\AgdaSymbol{)))}\<%
\end{code}
\begin{code}%
\>[0]\AgdaFunction{LR·µ•‚áíLR‚Çú}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{‚àÄ\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚äë}}\AgdaSpace{}%
\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{ùí´}\AgdaSymbol{\}\{}\AgdaBound{V}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùí´}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä¢·µí}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø·µ•}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}%
\>[34]\AgdaSymbol{‚Üí}%
\>[37]\AgdaBound{ùí´}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚ä¢·µí}}\AgdaSpace{}%
\AgdaBound{dir}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{V}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚äë·¥∏·¥ø‚Çú}}\AgdaSpace{}%
\AgdaBound{V‚Ä≤}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚¶Ç}}\AgdaSpace{}%
\AgdaBound{A‚äëA‚Ä≤}\<%
\end{code}
\begin{code}[hide]%
\>[0]\AgdaFunction{LR·µ•‚áíLR‚Çú}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{A‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{A‚äëA‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{ùí´}\AgdaSymbol{\}\{}\AgdaBound{V}\AgdaSymbol{\}\{}\AgdaBound{V‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{‚ä¢ùí±VV‚Ä≤}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚ä¢·µí-intro}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{k}\AgdaSpace{}%
\AgdaBound{ùí´k}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaFunction{LR·µ•‚áíLR‚Çú-step}\AgdaSymbol{\{}\AgdaArgument{V}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{V}\AgdaSymbol{\}\{}\AgdaBound{V‚Ä≤}\AgdaSymbol{\}\{}\AgdaBound{dir}\AgdaSymbol{\}\{}\AgdaBound{k}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚ä¢·µí-elim}\AgdaSpace{}%
\AgdaBound{‚ä¢ùí±VV‚Ä≤}\AgdaSpace{}%
\AgdaBound{k}\AgdaSpace{}%
\AgdaBound{ùí´k}\AgdaSymbol{)}\<%
\end{code}

